<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <!-- Google font -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">

  <!-- Bootstrap -->
  <link type="text/css" rel="stylesheet" href="/user/css/bootstrap.min.css" />

  <!-- Slick -->
  <link type="text/css" rel="stylesheet" href="/user/css/slick.css" />
  <link type="text/css" rel="stylesheet" href="/user/css/slick-theme.css" />

  <!-- nouislider -->
  <link type="text/css" rel="stylesheet" href="/user/css/nouislider.min.css" />

  <!-- Font Awesome Icon -->
  <link rel="stylesheet" href="/user/css/font-awesome.min.css">
  <script src="https://kit.fontawesome.com/0bc67ca932.js" crossorigin="anonymous"></script>

  <!-- Custom stlylesheet -->
  <link type="text/css" rel="stylesheet" href="/user/css/style.css" />
  <style>
    body {
      overflow-x: hidden;
    }
  </style>
</head>

<body>

  <!-- HEADER -->
  <header>
    <!-- TOP HEADER -->
    <div id="top-header">
      <div class="container">
        <ul class="header-links pull-left">
          <li><a href="#"><i class="fa fa-phone"></i> +021-95-51-84</a></li>
          <li><a href="#"><i class="fa fa-envelope-o"></i> email@email.com</a></li>
          <li><a href="#"><i class="fa fa-map-marker"></i> 1734 Stonecoal Road</a></li>
        </ul>
        <ul class="header-links pull-right">
          <div class="dropdown">
            <button class="dropbtn">More</button>
            <div class="dropdown-content">
              <a href="#"><i class="fa-solid fa-bell"></i>NOTIFICATION PREFERENCES</a>
              <a href="#"><i class="fa-solid fa-comments-question-check"></i>24x7 Customer Care Support</a>
              <a href="#"><i class="fa-solid fa-download"></i>Download App</a>
            </div>
          </div>

          <div class="dropdown">
            <a class="dropbtn"><i class="fa fa-user-o"></i> My Account</a>
            <div class="dropdown-content">
              <a href="#"><i class="fa-solid fa-user"></i> Profile</a>
              <a href="#"><i class="fa-solid fa-award"></i> Prime Membership</a>
              <a href="#"><i class="fa-solid fa-coin-vertical"></i> Supercoin Zone</a>
              <a href="#"><i class="fa-solid fa-cards-blank"></i>Orders</a>
              <a href="#"><i class="fa-solid fa-gift-card"></i>Coupons</a>
              <a href="#"><i class="fa-solid fa-gift-card"></i> Gift Cards</a>
              <a href="#">Notifications</a>
              <a href="/userlogout">Logout</a>
            </div>
          </div>
        </ul>
      </div>
    </div>
    <!-- /TOP HEADER -->

    <!-- MAIN HEADER -->
    <div id="header">
      <!-- container -->
      <div class="container">
        <!-- row -->
        <div class="row">
          <!-- LOGO -->
          <div class="col-md-3">
            <div class="header-logo">
              <a href="#" class="logo">
                <img src="./img/logo.png" alt="">
              </a>
            </div>
          </div>
          <!-- /LOGO -->

          <!-- SEARCH BAR -->
          <div class="col-md-6">
            <div class="header-search">
              <form>
                <select class="input-select">
                  <option value="0">All Categories</option>
                  <option value="1">Category 01</option>
                  <option value="1">Category 02</option>
                </select>
                <input class="input" placeholder="Search here">
                <button class="search-btn">Search</button>
              </form>
            </div>
          </div>
          <!-- /SEARCH BAR -->

          <!-- ACCOUNT -->
          <div class="col-md-3 clearfix">
            <div class="header-ctn">
              <!-- Wishlist -->
              <div>
                <a href="#">
                  <i class="fa fa-heart-o"></i>
                  <span>Your Wishlist</span>
                  <div class="qty">2</div>
                </a>
              </div>
              <!-- /Wishlist -->

              <!-- Menu Toogle -->
              <div class="menu-toggle">
                <a href="#">
                  <i class="fa fa-bars"></i>
                  <span>Menu</span>
                </a>
              </div>
              <!-- /Menu Toogle -->
            </div>
          </div>
          <!-- /ACCOUNT -->
        </div>
        <!-- row -->
      </div>
      <!-- container -->
    </div>
    <!-- /MAIN HEADER -->
  </header>
  <!-- /HEADER -->

  <section id="section" class="h-100 h-custom" style="background-color: #eee;">
    <div>
      <div class="row d-flex  h-100">
        <div class="col ">
          <div class="card">
            <div class="card-body ">

              <div class="row">

                <div class="col-lg-7">
                  <h5 class="mb-3"><a href="#!" class="text-body"><i class="fas fa-long-arrow-alt-left "></i>Continue
                      shopping</a></h5>
                  <hr>

                  <div class="d-flex justify-content-between align-items-center mb-4">
                    <div><b>
                        <p class="mb-1">Shopping cart</p>
                        <p class="mb-0">You have <span id="cartcount">{{cartCount}}</span> items in your cart</p>
                      </b>
                    </div>
                    <div>
                      <p class="mb-0"><span class="text-muted">Sort by:</span> <a href="#!" class="text-body">price <i
                            class="fas fa-angle-down mt-1"></i></a></p>
                    </div>
                  </div>
                  {{#each data}}
                  <div class="">
                    <div class="card mb-3">
                      <div class="card-body">
                        <div class="d-flex justify-content-between">
                          <div class="d-flex flex-row align-items-center">
                            <div class="">
                              <img src="/images/productimages/{{this.items._id}}/1.jpg" class="img-fluid rounded-3"
                                alt="Shopping item" style="width: 65px;">
                            </div>
                            <div class=" ms-3">
                              <h5>{{this.items.Name}}</h5>
                              <p class="small mb-0 mt-3">{{this.items.Color}}</p>
                            </div>
                          </div>


                          <div class="d-flex flex-row align-items-center">
                            <div class="d-flex justify-content-center">
                              <button class="btn btn-danger" id="up"
                                onclick="quantity('{{this._id}}','{{this.items._id}}','{{this.items.Price}}',-1)"><i
                                  class="fa-solid fa-angle-down"></i></button>
                              <span id="{{this.items._id}}" class="button-solid"
                                style="margin: 10px;">{{this.quantity}}</span>
                              <button class="btn btn-success" id="down"
                                onclick="quantity('{{this._id}}','{{this.items._id}}','{{this.items.Price}}',1)"><i
                                  class="fa-solid fa-angle-up"></i></button>
                            </div>
                            <div style="width: 80px; margin: 20px;">
                              <h5 class="mb-0">â‚¹{{this.items.Price}}</h5>
                            </div>
                            <button style="background-color: #ffff;border:none;"
                              onclick="deletefromcart('{{this.items._id}}')" style="color: #cecece;"><i
                                class="fas fa-trash-alt"></i></button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  {{/each}}


                </div>

                <!-- Order Details -->
                <div id="full" class="col-md-5 order-details" style="margin-top: 100px;">
                  <div class="section-title text-center">
                    <h3 class="title">Your Order</h3>
                  </div>
                  <div id="reload" class="order-summary">
                    <div class="order-col">
                      <div><strong>PRODUCT</strong></div>
                      {{!-- <div><strong>PRICE</strong></div> --}}
                      <div><strong>TOTAL</strong></div>
                    </div>
                    <div class="order-products">
                      {{#each data}}
                      <div class="order-col">
                        <div><span id="{{this.items._id}}quantity">{{this.quantity}}</span>x
                          <span>{{this.items.Name}}</span>
                        </div>
                        {{!-- <div id="{{this._id}}price">{{this.items.Price}}</div> --}}
                        <div id="{{this.items._id}}total">{{this.total}}</div>
                      </div>
                      {{/each}}

                    </div>
                    <div class="order-col">
                      <div>Shiping</div>
                      <div><strong style="color: green;">FREE</strong></div>
                    </div>
                    <div class="order-col">
                      <div><strong>TOTAL</strong></div>
                      <div><strong id="sum" class="order-total">{{sum}}</strong></div>
                    </div>
                  </div>

                  <a id="placeorder" href="/home/placeorder"><button class="primary-btn order-submit">Place
                      Order</button></a>
                </div>
                <!-- /Order Details -->


              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </section>




  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>
  <script src="/user/js/jquery.min.js"></script>
  <script src="/user/js/bootstrap.min.js"></script>
  <script src="/user/js/slick.min.js"></script>
  <script src="/user/js/nouislider.min.js"></script>
  <script src="/user/js/jquery.zoom.min.js"></script>
  <script src="/user/js/main.js"></script>

  <script>
    var cartcount = $('#cartcount').text()
    if (parseInt(cartcount) == 0) {
      $('#full').hide()
    } else {
      $('#full').show()
      function quantity(cartid, productid, price, count) {
        if (count == '-1') {
          price = '-' + price
        }
        $.ajax({
          url: '/home/change-product-quantity',
          method: 'POST',
          data: {
            cart: cartid,
            product: productid,
            count: count,
            quantity: $("#" + productid).text(),
            price: price
          },
          success: (data, totalsum) => {
            if (data.data == 0) {
              location.reload()
            } else {
              const total = document.getElementById(productid + 'total')
              const sum = document.getElementById('sum')
              const quantity = document.getElementById(productid)
              const calculationquantity = document.getElementById(productid + 'quantity')
              total.innerHTML = data.product.total
              sum.innerHTML = data.sum
              quantity.innerHTML = data.product.quantity
              calculationquantity.innerHTML = quantity.innerText
            }
          },
          error: (er) => {
            alert('a error find')
          }
        })
      }
    }
    function deletefromcart(productid) {
      $.ajax({
        url: '/home/deletecart',
        method: 'POST',
        data: {
          product: productid,
          user: '{{user}}'
        },
        success: (response) => {
          if (response == "ok") {
            location.reload()
          }
        },
        error: () =>
          alert('Product removig is canceled please try again')
      })
    }
  </script>

</body>
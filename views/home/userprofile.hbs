<head>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="/user/css/wishlist.css">
  <!-- Google font -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>
  <link type="text/css" rel="stylesheet" href="/user/css/bootstrap.min.css" />

  <!-- Slick -->
  <link type="text/css" rel="stylesheet" href="/user/css/slick.css" />
  <link type="text/css" rel="stylesheet" href="/user/css/slick-theme.css" />

  <!-- nouislider -->
  <link type="text/css" rel="stylesheet" href="/user/css/nouislider.min.css" />

  <!-- Font Awesome Icon -->
  <link rel="stylesheet" href="/user/css/font-awesome.min.css">
  <script src="https://kit.fontawesome.com/0bc67ca932.js" crossorigin="anonymous"></script>

  <!-- Custom stlylesheet -->
  <link type="text/css" rel="stylesheet" href="/user/css/style.css" />
  <style>
    @media (min-width: 1025px) {
      .h-custom {
        height: 100vh !important;
      }
    }

    body {
      background: rgb(99, 39, 120)
    }

    .form-control:focus {
      box-shadow: none;
      border-color: #BA68C8
    }

    .profile-button {
      background: rgb(99, 39, 120);
      box-shadow: none;
      border: none
    }

    .profile-button:hover {
      background: #682773
    }

    .profile-button:focus {
      background: #682773;
      box-shadow: none
    }

    .profile-button:active {
      background: #682773;
      box-shadow: none
    }

    .back:hover {
      color: #682773;
      cursor: pointer
    }

    .labels {
      font-size: 11px
    }

    .add-experience:hover {
      background: #BA68C8;
      color: #fff;
      cursor: pointer;
      border: solid 1px #BA68C8
    }

    .input-hide {
      display: none;
    }

    .input-error::-webkit-input-placeholder {
      color: red
    }
    .error{
      color: red;
    }
  </style>
</head>

<body>

  <!-- HEADER -->
  <header>
    <!-- TOP HEADER -->
    <div id="top-header">
      <div class="container">
        <ul class="header-links pull-left">
          <li><a href="#"><i class="fa fa-phone"></i> +021-95-51-84</a></li>
          <li><a href="#"><i class="fa fa-envelope-o"></i> email@email.com</a></li>
          <li><a href="#"><i class="fa fa-map-marker"></i> 1734 Stonecoal Road</a></li>
        </ul>
        <ul class="header-links pull-right">
          <div class="dropdown">
            <button class="dropbtn">More</button>
            <div class="dropdown-content">
              <a href="#"><i class="fa-solid fa-bell"></i>NOTIFICATION PREFERENCES</a>
              <a href="#"><i class="fa-solid fa-comments-question-check"></i>24x7 Customer Care Support</a>
              <a href="#"><i class="fa-solid fa-download"></i>Download App</a>
            </div>
          </div>

          <div class="dropdown">
            <a class="dropbtn"><i class="fa fa-user-o"></i> My Account</a>
            <div class="dropdown-content">
              <a href="#"><i class="fa-solid fa-user"></i> Profile</a>
              <a href="#"><i class="fa-solid fa-award"></i> Prime Membership</a>
              <a href="#"><i class="fa-solid fa-coin-vertical"></i> Supercoin Zone</a>
              <a href="#"><i class="fa-solid fa-cards-blank"></i>Orders</a>
              <a href="#"><i class="fa-solid fa-gift-card"></i>Coupons</a>
              <a href="#"><i class="fa-solid fa-gift-card"></i> Gift Cards</a>
              <a href="#">Notifications</a>
              <a href="/userlogout">Logout</a>
            </div>
          </div>
        </ul>
      </div>
    </div>
    <!-- /TOP HEADER -->

    <!-- MAIN HEADER -->
    <div id="header">
      <!-- container -->
      <div class="container">
        <!-- row -->
        <div class="row">
          <!-- LOGO -->
          <div class="col-md-3">
            <div class="header-logo">
              <a href="#" class="logo">
                <img src="./img/logo.png" alt="">
              </a>
            </div>
          </div>
          <!-- /LOGO -->

          <!-- SEARCH BAR -->
          <div class="col-md-6">
            <div class="header-search">
              <form>
                <select class="input-select">
                  <option value="0">All Categories</option>
                  <option value="1">Category 01</option>
                  <option value="1">Category 02</option>
                </select>
                <input class="input" placeholder="Search here">
                <button class="search-btn">Search</button>
              </form>
            </div>
          </div>
          <!-- /SEARCH BAR -->

          <!-- ACCOUNT -->
          <div class="col-md-3 clearfix">
            <div class="header-ctn">
              <!-- Wishlist -->
              <div>
                <a href="#">
                  <i class="fa fa-heart-o"></i>
                  <span>Your Wishlist</span>
                  <div class="qty">2</div>
                </a>
              </div>
              <!-- /Wishlist -->

              <!-- Menu Toogle -->
              <div class="menu-toggle">
                <a href="#">
                  <i class="fa fa-bars"></i>
                  <span>Menu</span>
                </a>
              </div>
              <!-- /Menu Toogle -->
            </div>
          </div>
          <!-- /ACCOUNT -->
        </div>
        <!-- row -->
      </div>
      <!-- container -->
    </div>
    <!-- /MAIN HEADER -->
  </header>
  <!-- /HEADER -->

  <!--Modal: Login with Avatar Form-->
<div class="modal fade" id="modalLoginAvatar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog cascading-modal modal-avatar modal-sm" role="document">
    <!--Content-->
    <div class="modal-content">

      <!--Header-->
      <div class="modal-header">
        <img src="https://mdbootstrap.com/img/Photos/Avatars/img%20%281%29.webp" alt="avatar" class="rounded-circle img-responsive">
      </div>
      <!--Body-->
      <div class="modal-body text-center mb-1">

        <h5 class="mt-1 mb-2">Maria Doe</h5>

        <div class="md-form ml-0 mr-0">
          <input type="password" type="text" id="passwrodchecking" class="form-control form-control-sm validate ml-0">
          <label data-error="wrong" data-success="right" for="form29" class="ml-0">Enter password</label>
        </div>

        <div class="text-center mt-4">
          <button onclick="checkpassword()" class="btn btn-cyan mt-1" data-dismiss="modal">Change</button>
        </div>
      </div>

    </div>
    <!--/.Content-->
  </div>
</div>

 <!--Modal: Login with Avatar Form-->
<div class="modal fade" id="password-changing-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
  aria-hidden="true">
  <div class="modal-dialog cascading-modal modal-avatar modal-sm" role="document">
    <!--Content-->
    <div class="modal-content">

      <!--Header-->
      <div class="modal-header">
        <img src="https://mdbootstrap.com/img/Photos/Avatars/img%20%281%29.webp" alt="avatar" class="rounded-circle img-responsive">
      </div>
      <!--Body-->
      <div class="modal-body text-center mb-1">

        <h5 class="mt-1 mb-2">Maria Doe</h5>
        <form onsubmit="return false"  id="password-changing-form">
        <div class="md-form ml-0 mr-0">
          <input  type="password" type="text" name="oldpassword" id="oldpassword" class="form-control form-control-sm validate mt-4" placeholder="Old Password">
        </div>

        
        <div class="md-form ml-0 mr-0">
          <input  type="password" type="text" name="newpassword" id="newpassword" class="form-control form-control-sm validate mt-4" placeholder="New Password">
        </div>
        
        <div class="md-form ml-0 mr-0">
          <input type="password" type="text" name="confirmpassword" id="confirmpassword" class="form-control form-control-sm validate mt-4" placeholder="Confirm Password">
        </div>

        <div class="text-center mt-4">
          <button class="btn btn-cyan mt-1" id="password-changing-button">Change</button>
        </div>
      </div>
      </form>

    </div>
    <!--/.Content-->
  </div>
</div>
<!--Modal: Login with Avatar Form-->


  <section style="background-color: #eee;">
    <div class="container py-5">
      <div class="row">
        <div class="col">
          <nav aria-label="breadcrumb" class="bg-light rounded-3 p-3 mb-4">
            <ol class="breadcrumb mb-0">
              <li class="breadcrumb-item"><a href="/home">Home</a></li>
              <li class="breadcrumb-item active" aria-current="page">User Profile</li>
            </ol>
          </nav>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-4">
          <div class="card mb-4">
            <div class="card-body text-center">
              <img src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp" alt="avatar"
                class="rounded-circle img-fluid" style="width: 150px;">
              <h5 class="my-3">{{user.firstname}} {{user.lastname}}</h5>
              <p class="text-muted mb-1">Full Stack Developer</p>
              <p class="text-muted mb-4">Bay Area, San Francisco, CA</p>
              <div class="d-flex justify-content-center mb-2">
              </div>
            </div>
          </div>
          <div class="card mb-4 mb-lg-0">
            <div class="card-body p-0">
              <ul class="list-group list-group-flush rounded-3">
                <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                  <i class="fas fa-globe fa-lg text-warning"></i>
                  <p class="mb-0">https://mdbootstrap.com</p>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                  <i class="fab fa-github fa-lg" style="color: #333333;"></i>
                  <p class="mb-0">mdbootstrap</p>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                  <i class="fab fa-twitter fa-lg" style="color: #55acee;"></i>
                  <p class="mb-0">@mdbootstrap</p>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                  <i class="fab fa-instagram fa-lg" style="color: #ac2bac;"></i>
                  <p class="mb-0">mdbootstrap</p>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center p-3">
                  <i class="fab fa-facebook-f fa-lg" style="color: #3b5998;"></i>
                  <p class="mb-0">mdbootstrap</p>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div id="" class="col-lg-8">
          <div id="alert" class="alert input-hide " role="alert"></div>
          <div id="update-alert" class="alert alert-success  hide" ></div>
          <div class="card mb-4">
            <div class="card-body">
              <div class="row">
                <div class="col-sm-3 ">
                  <p class="mb-0 ">Name</p>
                </div>
                <div class="col-sm-4 ">
                  <p id="lastname" class="text-muted mb-0">{{user.lastname}}</p>
                </div>
                <div class="d-flex col-sm-5 m-0">
                  <input type="text" class="input-hide me-2 form-control" id="inputname" placeholder="Name">
                  <button id="name-button" onclick="update('lastname')" class="ms-auto btn btn-primary"><i
                      class="fa-sharp fa-solid fa-pen"></i></button>
                  <button id="lastname-close-button" onclick="update('lastname-close')"
                    class="input-hide btn btn-danger"></button>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3 ">
                  <p class="mb-0 ">Mobile</p>
                </div>
                <div class="col-sm-4 ">
                  <p id="mobile" class="text-muted mb-0">{{user.mobile}}</p>
                </div>
                <div class="d-flex col-sm-5 m-0">
                  <input type="tel" class="input-hide me-2 form-control" id="inputmobile" placeholder="Mobile">
                  <button id="mobile-button" onclick="update('mobile')" class="ms-auto btn btn-primary" ><i
                      class="fa-sharp fa-solid fa-pen"></i></button>
                  <button id="mobile-close-button" onclick="update('mobile-close')"
                    class="input-hide btn btn-danger"></button>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <p class="mb-0">Email</p>
                </div>
                <div class="col-sm-4">
                  <p id="email" class="text-muted mb-0">{{user.email}}</p>
                </div>
                <div class="d-flex col-sm-5 m-0">
                  <input autocomplete="off" type="email" class="input-hide me-2 form-control" id="inputemail"
                    placeholder="Email">
                  <button id="email-button" onclick="update('email')" class="ms-auto btn btn-primary" ><i
                      class="fa-sharp fa-solid fa-pen" ></i></button>
                  <button id="email-close-button" onclick="update('email-close')"
                    class="input-hide btn btn-danger"></button>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <p class="mb-0">Password</p>
                </div>
                <div class="col-sm-3">
                  <p class="text-muted mb-0">*********</p>
                </div>
                <div class="d-flex col-sm-6 m-0">
                  <button  class="ms-auto btn btn-primary" data-toggle="modal" data-target="#password-changing-modal"><i
                      class="fa-sharp fa-solid fa-pen"></i></button>
                </div>
              </div>
            </div>
          </div>

          <div class="">
            <h3 style="padding-left: 2%;">Manage Addresses</h3>
           <div id="address-div">
						<div class="col-md-12">
							{{#each user.addresses}}
							<div>
								<label class="viewaddress">
									<input name="address" type="radio" onclick="selectaddress('{{this._id}}')">
									<div>
										<h4>{{this.firstname}} {{this.lastname}}</h4>
										<h5>{{this.mobile}}</h5>
										<h5>{{this.address}},{{this.state}},<b>{{this.pincode}}</b></h5>
									</div>
									<div>
										<button onclick="editaddress('{{this._id}}')"><i
												class="fa-solid fa-pen"></i></button>
										<button onclick="deleteaddress('{{this._id}}')"><i
												class="fa-solid fa-trash"></i></button>

									</div>

								</label>
								<div class="row">
									<div class="col-md-7 mb-4">
										<div class="card mb-4" style="display: none;" id="{{this._id}}">
											<div class="card-body">
												<form id="{{this._id}}form" onsubmit="return false;" method="post">
													<input style="display: none;" type="text" name="addressid"
														value="{{this._id}}">
													<!-- 2 column grid layout with text inputs for the first and last names -->
													<button style=" margin-top: 10px;margin-bottom: 10px;"
														class="btn btn-info edit-address-close-button"
														id="">Close</button>
													<div class="col">
														<div class="form-outline">
															<label class="form-label" for="form7Example1">First
																name</label>
															<input type="text" name="firstname"
																value="{{this.firstname}}" id="form7Example1"
																class="form-control" />
														</div>
													</div>
													<div class="col">
														<div class="form-outline">
															<label class="form-label" for="form7Example2">Last
																name</label>
															<input type="text" name="lastname" value="{{this.lastname}}"
																id="form7Example2" class="form-control" />
														</div>
													</div>

													<!-- Text input -->
													<div class="form-outline mb-4">
														<label class="form-label" for="form7Example3">Mobile</label>
														<input type="number" id="" name="mobile" value="{{this.mobile}}"
															class="form-control" />

													</div>

													<!-- Text input -->
													<div class="form-outline mb-4">
														<label class="form-label" for="form7Example4">Email</label>
														<input type="email" id="" name="email" value="{{this.email}}"
															class="form-control" />

													</div>

													<!-- Email input -->
													<div class="form-outline mb-4">
														<label class="form-label" for="form7Example5">Address</label>
														<input type="text" id="" name="address" value="{{this.address}}"
															class="form-control" />
													</div>

													<div class="form-outline mb-4">
														<label class="form-label" for="form7Example6">Pincode</label>
														<input type="number" id="" name="pincode"
															value="{{this.pincode}}" class="form-control" />
													</div>

													<div class="form-outline mb-4">
														<label class="form-label" for="form7Example6">Locality</label>
														<input type="text" id="" name="locality"
															value="{{this.locality}}" class="form-control" />
													</div>

													<div class="form-outline mb-4">
														<label class="form-label" for="form7Example6">Landmark</label>
														<input type="text" id="" name="landmark"
															value="{{this.landmark}}" class="form-control" />
													</div>

													<div class="form-outline mb-5">
														<label class="form-label" for="form7Example6">Alternate
															Mobile</label>
														<input type="number" id="" value="{{this.alternatemobile}}"
															name="alternatemobile" class="form-control" />
													</div>
													<button style="margin-top: 25px;margin-bottom: 25px;"
														onclick="editaddressbutton('{{this._id}}')"
														id="{{this._id}}button" class=" btn btn-danger">Edit
														Address</button>
												</form>
											</div>
										</div>
									</div>
								</div>
							</div>
							{{/each}}

							<div>
								<a onclick="addnewAddressdiv()">
									<div style="margin-top: 25px;">
										<button class="address-card">
											<i class="fa-solid fa-plus"></i><b>Add New Address</b>
										</button>
									</div>
								</a>
								<div class="row">
									<div class="col-md-7 mb-4">
										<div class="card mb-4" style="display: none;" id="add-address-form-div">
											<div class="card-body">
												<form id="add-address-form">
													<!-- 2 column grid layout with text inputs for the first and last names -->
													<button style="margin-top: 25px;" id="add-address-close-button"
														class=" btn btn-primary">Close</button>
													<div class="col">
														<div class="form-outline">
															<label class="form-label" for="form7Example1">First
																name</label>
															<input type="text" name="firstname" id="form7Example1"
																class="form-control">
														</div>
													</div>
													<div class="col">
														<div class="form-outline">
															<label class="form-label" for="form7Example2">Last
																name</label>
															<input type="text" name="lastname" id="form7Example2"
																class="form-control">
														</div>
													</div>

													<!-- Text input -->
													<div class="form-outline mb-4">
														<label class="form-label" for="form7Example3">Mobile</label>
														<input type="number" id="" name="mobile" class="form-control">

													</div>

													<!-- Text input -->
													<div class="form-outline mb-4">
														<label class="form-label" for="form7Example4">Email</label>
														<input type="email" id="" name="email" class="form-control">

													</div>

													<!-- Email input -->
													<div class="form-outline mb-4">
														<label class="form-label" for="form7Example5">Address</label>
														<input type="text" id="" name="address" class="form-control">
													</div>

													<div class="form-outline mb-4">
														<label class="form-label" for="form7Example6">Pincode</label>
														<input type="number" id="" name="pincode" class="form-control">
													</div>

													<div class="form-outline mb-4">
														<label class="form-label" for="form7Example6">Locality</label>
														<input type="text" id="" name="locality" class="form-control">
													</div>

													<div class="form-outline mb-4">
														<label class="form-label" for="form7Example6">Landmark</label>
														<input type="text" id="" name="landmark" class="form-control">
													</div>

													<div class="form-outline mb-5">
														<label class="form-label" for="form7Example6">Atltrenatie
															Mobile</label>
														<input type="number" id="" name="alternatemobile"
															class="form-control">
													</div>
													<button style="margin-top: 25px;" id="add-address-button"
														class=" btn btn-danger">Add New Address</button>
												</form>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

          </div>
        </div>
      </div>
    </div>
  </section>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"
    integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js"
    integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.js"></script>
  <script src="/user/js/jquery.min.js"></script>
  <script src="/user/js/bootstrap.min.js"></script>
  <script src="/user/js/slick.min.js"></script>
  <script src="/user/js/nouislider.min.js"></script>
  <script src="/user/js/jquery.zoom.min.js"></script>
  <script src="/user/js/main.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.js"></script>

  <script>
    $('#password-changing-button').click(()=>{
      $('#password-changing-form').validate({
        rules:{
          oldpassword:{
            required:true,
            minlength:8
          },
          newpassword:{
            required:true,
            minlength:8
          },
          confirmpassword:{
            required:true,
            minlength:8,
            equalTo: "#newpassword"
          }
        }
      })
      if($('#password-changing-form').valid()){
        $.ajax({
          url:'/home/password-changing',
          method:'post',
          data:$('#password-changing-form').serialize(),
          success:(response)=>{
          alert('seccess')
          },
          error:(err)=>{
            alert(err)
          }
        })
      }
    })
      function checkpassword(){
    const input = $('#passwrodchecking')
    const password = input.val()
    $.ajax({
      url:'/home/password-checking',
      method:'post',
      data:{password:password},
      success:(response)=>{
       if(response.status == true) update.passwordcorrect()
       else {
        $('#alert').css('display','block')
        $('#alert').text('Please Enter Correct Password')
        setTimeout(()=>$('#alert').css('display','none'),3000)
       }
      },
      error:(err)=>{
        alert(err)
      }
    })
    }
  </script>
  <script>
    function update(keyword) {

      const edit = '<i class="fa-sharp fa-solid fa-pen"></i>'
      const save = '<i class="fa-solid fa-floppy-disk"></i>'
      const close = '<i class="fa-solid fa-xmark"></i>'

      const namebtn = $('#name-button')
      const nameinp = $('#inputname')
      const nameclose = $('#lastname-close-button')

      const mobilebtn = $('#mobile-button')
      const mobileinp = $('#inputmobile')
      const mobileclose = $('#mobile-close-button')

      const emailbtn = $('#email-button')
      const emailinp = $('#inputemail')
      const emailclose = $('#email-close-button')

      const alert = $('#alert')

      if (keyword == 'lastname') {
        if (namebtn.html() == edit) {
          nameinp.css('display', 'block')
          nameclose.css('display', 'block')
          namebtn.html(save)
          nameclose.html(close)
        } else if (namebtn.html() == save) {
          const result = validatelastname(nameinp)
          if (result == true) updateprofile(namebtn, nameinp, nameclose, edit, keyword)
        }
      } else if (keyword == 'mobile') {
        if (mobilebtn.html() == edit) {
          mobileinp.css('display', 'block')
          mobileclose.css('display', 'block')
          mobilebtn.html(save)
          mobileclose.html(close)
          
        } else if (mobilebtn.html() == save) {
          const result = validatemobile(mobileinp)
          if (result == true)  mobilebtn.attr("data-toggle",'modal').attr('data-target', '#modalLoginAvatar')
        }
    } else if (keyword == 'email') {
      if (emailbtn.html() == edit) {
        emailinp.css('display', 'block')
        emailclose.css('display', 'block')
        emailbtn.html(save)
        emailclose.html(close)
      } else if (emailbtn.html() == save) {
        const result = validateemail(emailinp)
        if (result == true) emailbtn.attr("data-toggle",'modal').attr('data-target', '#modalLoginAvatar')
      }
    } else if (keyword == 'lastname-close') {
      namebtn.html(edit)
      nameclose.css('display', 'none')
      nameinp.css('display', 'none')
      alert.css('display', 'none')
    } else if (keyword == 'mobile-close') {
      mobilebtn.html(edit)
      mobileclose.css('display', 'none')
      mobileinp.css('display', 'none')
      alert.css('display', 'none')
    } else if (keyword == 'email-close') {
      emailbtn.html(edit)
      emailclose.css('display', 'none')
      emailinp.css('display', 'none')
      alert.css('display', 'none')
    }
    function passwordcorrect(){
     if(keyword == 'mobile') updateprofile(mobilebtn,mobileinp,mobileclose,edit,keyword)
     if(keyword == 'email') updateprofile(emailbtn, emailinp, emailclose, edit, keyword)
    }
    update.passwordcorrect = passwordcorrect
    }



    function updateprofile(btn, inp, close, edit, keyword) {
      const input = inp.val()
      $.ajax({
        url: '/home/user-profile-edit',
        method: "post",
        data: {
          keyword: keyword,
          value: input
        },
        success: (response) => {
          $('#update-alert').removeClass('hide')
          $('#update-alert').html('You successfully update your'+keyword +' <button type="button" class="btn-close ms-auto" data-bs-dismiss="alert" aria-label="Close"></button>')
          $('#' + keyword).text(input)
          btn.removeAttr("target")
          setTimeout(()=>$('#update-alert').css('display','none'),10000)
        },
        error: (err) => {
          alert('error')
        }
      })
      inp.css('display', 'none')
      close.css('display', 'none')
      btn.html(edit)
    }



    function validatelastname(inp) {
      const val = inp.val()
      const valnumber = $.isNumeric(val)
      const alert = $('#alert')
      alert.addClass('alert-danger')
      if (val == null || val == '') {
        alert.text("Name is required")
        alert.css('display', 'block')
        inp.addClass('input-error')
        return false;
      } else if (val.length < 6) {
        alert.text("Enter minimum 6 character")
        return false
      } else if (valnumber) {
        alert.text('Enter Character')
        return false
      }
      alert.css('display', 'none')
      return true
    }

    function validatemobile(inp) {
      const val = inp.val()
      const valnumber = $.isNumeric(val)
      const alert = $('#alert')
      alert.addClass('alert-danger')
      if (val == null || val == '') {
        alert.text("Name is required")
        alert.css('display', 'block')
        inp.addClass('input-error')
        return false;
      } else if (val.length < 10) {
        alert.text("Enter minimum 10 Numbers")
        return false
      } else if (valnumber == false) {
        alert.text('Enter Numbers Only')
        return false
      }
      alert.css('display', 'none')
      return true
    }

    function validateemail(inp) {
      const val = inp.val()
      const alert = $('#alert')
      alert.addClass('alert-danger')
      if (val == null || val == '') {
        alert.text("Email is required")
        alert.css('display', 'block')
        inp.addClass('input-error')
        return false;
      } else if (validateEmailAddress(val) == -1) {
        alert.text('Enter Correct Format')
        return false
      }
      alert.css('display', 'none')
      return true
    }
    function validateEmailAddress(input) {
      var regex = /[^\s@]+@[^\s@]+\.[^\s@]+/;
      if (regex.test(input)) {
        return 1;
      } else {
        return -1;
      }
    }

    function addnewAddressdiv() {
			$("#add-address-form").submit(function (e) {
				e.preventDefault();
			});
			$('#add-address-form-div').css('display', 'block')
			$('#add-address-close-button').click(() => {
				$('#add-address-form-div').css('display', 'none')
			})
			$('#add-address-button').click(() => {
				$('#add-address-form').validate({
					rules: {
						firstname: {
							required: true,
							minlength: 6
						},
						lastname: {
							required: true,
							minlength: 6
						},
						mobile: {
							required: true,
							minlength: 10,
							maxlength: 10
						},
						email: {
							required: true,
							email: true
						},
						address: {
							required: true,
							minlength: 8
						},
						pincode: {
							required: true,
							minlength: 6,
							maxlength: 6
						},
						locality: {
							required: true
						},
						landmark: {
							required: true
						},
						alternatemobile: {
							required: true,
							minlength: 10,
							maxlength: 10
						}
					}
				})
				if ($('#add-address-form').valid()) {
					$.ajax({
						url: '/home/addnewaddress',
						method: 'POST',
						data: $('#add-address-form').serialize(),
						success: (response) => {
							$('#address-div').load(location.href + '   #address-div')
						},
						error: (err) => {
							alert(err)
						}
					})
				}
			})
		}

    function editaddressbutton(addressid) {
			$.ajax({
				url: '/home/editaddress',
				method: 'POST',
				data: $('#' + addressid + 'form').serialize(),
				success: (response) => {
					$('#address-div').load(location.href + '   #address-div')
				},
				error: (err) => {
					alert(err)
				}
			})
		}

    	function editaddress(addressid) {
			$('#' + addressid).css('display', 'block');
			$('.edit-address-close-button').click(() => {
				$("#edit-address-form").submit(function (e) {
					e.preventDefault();
				});
				$('#' + addressid).css('display', 'none')
			})
		}
    	function deleteaddress(addressid) {
			let confirmstatus = confirm('Are You Sure You want to delete the address')

			if (confirmstatus) {
				$.ajax({
					url: '/home/deleteaddress/' + addressid,
					method: 'GET',
					success: (data) => {
						alert('Address Delete successfully')
						$('#address-div').load(location.href + '   #address-div')
					}
				})
			}
		}
  </script>

</body>